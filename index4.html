<!doctype html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <title>Â¡Blog!Â¡Blog! RSS</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                background: #1f1f1f;
                color: #fff;
                margin: 0;
                padding: 0;
            }
            header {
                background: #fff;
                padding: 20px;
                text-align: center;
            }
            header,
            footer {
                padding: 30px 20px;
                text-align: center;
            }
            .header-inner {
                display: inline-block;
                text-align: left;
            }
            .header-content {
                display: flex;
                align-items: center;
                gap: 12px;
                flex-wrap: wrap;
                justify-content: center;
            }
            header img {
                width: 120px;
                height: 100px;
                border-radius: 6px;
            }
            header h1 {
                color: #3b3b3c;
                margin: 0;
                font-size: 1.95em;
            }
            header h2 {
                color: #3b3b3c;
                margin: 5px 0 0;
                font-size: 1.1em;
                font-weight: normal;
                font-style: italic;
            }
            header p {
                color: #3b3b3c;
                margin: 5px 0 0;
                font-size: 0.95em;
            }
            footer {
                background: #2f2f30;
                padding: 20px;
            }
            footer p {
                color: #fff;
                font-size: 0.85em;
                margin: 0;
            }
            main {
                padding: 40px;
                max-width: 800px;
                margin: auto;
            }
            .item {
                background: #2c2c2c;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            .item.aliado {
                background: #2b3b59;
                border: 1px solid #4a6eff;
            }
            .blog {
                color: #ffa500;
                font-size: 1em;
                font-weight: bold;
            }
            .blog img {
                width: 18px;
                height: 18px;
                vertical-align: middle;
                margin-right: 5px;
            }
            .descripcion {
                color: #ddd;
                font-size: 0.95em;
            }
            a {
                color: #6abe30;
                text-decoration: none;
                font-weight: bold;
            }
            a:hover {
                text-decoration: underline;
            }
            .filtros {
                text-align: center;
                margin-bottom: 30px;
            }
            select {
                background: #2c2c2c;
                color: #fff;
                border: 1px solid #555;
                padding: 6px 10px;
                border-radius: 6px;
                margin: 0 5px;
            }
        </style>
    </head>
    <body>
        <header>
            <div class="header-inner">
                <div class="header-content">
                    <img
                        src="https://blogsencastellano.wordpress.com/wp-content/uploads/2025/08/frog-pixel-recortada.gif"
                        alt="Logo Â¡Blog!Â¡Blog!"
                    />
                    <div class="title-group">
                        <h1>
                            Â¡Blog!Â¡Blog!
                            <span style="font-style: italic; color: #ffa500"
                                >RSSðŸš€</span
                            >
                        </h1>
                        <h2>Directorio de blogs en espaÃ±ol</h2>
                    </div>
                </div>
                <p>
                    Descubre los Ãºltimos blogs agregados al directorio
                    <a href="https://blogblog.es">Â¡Blog!Â¡Blog!</a>
                </p>
            </div>
        </header>

        <main>
            <div class="filtros">
                <select id="filtroPais">
                    <option value="">ðŸŒŽ Todos los paÃ­ses</option>
                </select>
                <select id="filtroCategoria">
                    <option value="">ðŸ“š Todas las categorÃ­as</option>
                </select>
            </div>
            <div id="contenedor"></div>
        </main>

        <footer>
            <p>
                Â¡Blog!Â¡Blog!
                <a href="https://blogblog.es" style="color: #6abe30"
                    >Visita el directorio completo</a
                >
            </p>
        </footer>

        <script>
            const contenedor = document.getElementById("contenedor");
            const filtroPais = document.getElementById("filtroPais");
            const filtroCategoria = document.getElementById("filtroCategoria");
            let blogs = [];

            fetch("blogs.json")
                .then((res) => res.json())
                .then((data) => {
                    blogs = data;
                    poblarFiltros();
                    mostrarBlogs(blogs);
                })
                .catch((err) => {
                    contenedor.innerHTML =
                        "<p>Error al cargar los blogs ðŸ˜¢</p>" + err.message;
                });

            function poblarFiltros() {
                const paises = [
                    ...new Set(blogs.map((b) => b.PaÃ­s).filter(Boolean)),
                ];
                const categorias = [
                    ...new Set(
                        blogs
                            .flatMap((b) =>
                                b.CategorÃ­a
                                    ? b.CategorÃ­a.split(",").map((c) =>
                                          c.trim(),
                                      )
                                    : [],
                            )
                            .filter(Boolean),
                    ),
                ];

                paises.forEach((p) => {
                    const opt = document.createElement("option");
                    opt.value = p;
                    opt.textContent = p;
                    filtroPais.appendChild(opt);
                });

                categorias.forEach((c) => {
                    const opt = document.createElement("option");
                    opt.value = c;
                    opt.textContent = c;
                    filtroCategoria.appendChild(opt);
                });

                filtroPais.addEventListener("change", filtrar);
                filtroCategoria.addEventListener("change", filtrar);
            }

            function filtrar() {
                const paisSel = filtroPais.value;
                const catSel = filtroCategoria.value;
                const filtrados = blogs.filter((b) => {
                    const matchPais = paisSel ? b.PaÃ­s === paisSel : true;
                    const matchCat = catSel
                        ? b.CategorÃ­a && b.CategorÃ­a.includes(catSel)
                        : true;
                    return matchPais && matchCat;
                });
                mostrarBlogs(filtrados);
            }

            function mostrarBlogs(lista) {
                contenedor.innerHTML = "";
                if (!lista.length) {
                    contenedor.innerHTML =
                        "<p>No hay blogs con esos filtros ðŸ˜¢</p>";
                    return;
                }

                lista.forEach((b) => {
                    const item = document.createElement("div");
                    item.className = "item";
                    if (b.Aliado !== undefined) item.classList.add("aliado");

                    const etiquetaAliado =
                        b.Aliado !== undefined
                            ? '<img src="https://blogsencastellano.wordpress.com/wp-content/uploads/2025/08/frog-pixel-recortada.gif" alt="Aliado" />'
                            : "";

                    item.innerHTML = `
            <div class="blog">${etiquetaAliado}<a href="${b.Url}" target="_blank">${b.Nombre}</a></div>
            <p class="descripcion">${b.DescripciÃ³n || ""}</p>
            <p><strong>CategorÃ­a:</strong> ${b.CategorÃ­a || "-"}<br>
            <strong>PaÃ­s:</strong> ${b.PaÃ­s || "-"}</p>
          `;
                    contenedor.appendChild(item);
                });
            }
        </script>
    </body>
</html>
